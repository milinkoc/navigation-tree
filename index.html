<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jsTree test</title>
  
  <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>

  <!-- CSS only -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<style>
li span { cursor: pointer; }
li div { display: inline; }
</style>
<body>
	<div id="navTree" style="background-color: yellow;">
		<ul class="list-group" count="1">
		  <li class="list-group-item" id="1"><div><span>Root</span> - <a href="#">add a child</a></div>
		  </li>
		</ul>
	</div>
	<script type="text/javascript">
		$(document).ready(function() {
			
			$('#navTree').on('click', 'li span', function(e) {
				e.preventDefault();
				$(this).closest('li').children('ul').toggle();
			});
			
			$('#navTree').on('click', 'li a:contains("ok")', function(e) {
				e.preventDefault();
				$(this).parent('div').hide();
				$(this).parent('div').next('div').children('span').text($(this).prev('input').val());
				$(this).parent('div').next('div').show();
			});
			
			$('#navTree').on('click', 'li a:contains("edit")', function(e) {
				e.preventDefault();
				
				$(this).parent('div').hide();
				
				if ($(this).parent('div').prev('div').length == 0) {

					$(this).closest('li').prepend('<div><input type="text" /> <a href="#" >ok</a></div>');
					$(this).parent('div').prev('div').children('input').val($(this).prev('span').text());
				}
				else
				{
					$(this).parent('div').prev('div').show();
				}
			});
			
			$('#navTree').on('click', 'li a:contains("delete")', function(e) {
				e.preventDefault();
				if (confirm("Are you sure you want to delete this category?")) {
					$(this).closest('li').remove();
				}				
			});
			
			$('#navTree').on('click', 'li a:contains("add a child")', function(e) {
				e.preventDefault();
				
				if ($(this).closest('li').children('ul').length == 0) {
					$(this).closest('li').append('<ul style="padding-top: 0.75rem;" class="list-group" count="1"></ul>');
				}
				
				var level = $(this).closest('li').parents('ul').length;
				
				var count = $(this).closest('li').children('ul').attr('count');
				var catNumber = count;
				
				if (level > 1) {
					if ($(this).closest('li').children('ul').is(":hidden")) {
						$(this).closest('li').children('ul').show();
					}
					
					catNumber = '';
					//var parentId = $(this).closest('li > div').children('span').text().replace("Category ", "");

					$($(this).closest('li').parents('li:not(:last)').get().reverse()).each(function() {
							catNumber += $(this).attr('id') + '.';
					});
					
					catNumber += $(this).closest('li').attr('id') + '.';
					catNumber += count;
				}
				
				$(this).closest('li').children('ul').append('<li class="list-group-item" id=' + count + '><div><span>Category ' + catNumber + '</span> - <a href="#">edit</a> | <a href="#">delete</a> | <a href="#">add a child</a></div></li>');
				
				count++;
				$(this).closest('li').children('ul').attr('count', count);
			});
			
		});
	</script>
</body>
</html>